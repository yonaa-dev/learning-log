# WeakMap and WeakSet

## 핵심 질문
가비지 컬렉션은 언제 메모리를 회수하는가?

---

## 헷갈렸던 지점
- Map으로도 충분히 객체를 관리할 수 있다고 생각했다

객체를 키로 사용하는 경우에도  
참조가 남아 있다는 사실을 크게 의식하지 않았다.

---

## 구조적 이해
- WeakMap / WeakSet은 **약한 참조(weak reference)**를 사용한다
- 키로 사용된 객체에 대한 다른 참조가 모두 사라지면,  
  해당 엔트리는 가비지 컬렉션의 대상이 된다
- 데이터의 수명은 컬렉션이 아니라 **객체의 수명에 종속**된다

이로 인해  
명시적으로 삭제하지 않아도 메모리 회수가 가능하다.

---

## 실무 기준
- 객체의 생명주기를 직접 관리하고 싶지 않을 때
- **캐시, 메타데이터처럼 부수적인 정보**를 다룰 때  
  WeakMap / WeakSet을 사용한다
